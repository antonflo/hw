!function(e){"use strict";e.module("app",["ui.bootstrap","formly","formlyBootstrap"])}(angular),function(e){"use strict";function t(t,r,n,a){function o(){r({url:n.generate("address-book-data"),method:"GET"}).then(s)}function s(e){d.data.length=0,d.data=[].concat(e.data)}function l(){var e={data:{},url:n.generate("address-create"),fields:c},t={title:"Create Address"};a.create(e,t).then(s)}function i(t){var r={data:e.copy(t),url:n.generate("address-update",{id:t.id}),fields:c},o={title:"Edit Address","delete":{url:n.generate("address-delete",{id:t.id})}};a.create(r,o).then(s)}function u(e){r({url:n.generate("address-set-default",{id:e.id}),method:"POST"}).then(s)}var d=this;d.data=[],d.create=l,d.edit=i,d.setDefault=u,t(o,500);var c=[{key:"label",type:"input",className:"col-xs-12",templateOptions:{label:"Label",required:!0}},{className:"row",fieldGroup:[{key:"firstName",type:"input",className:"col-xs-4",templateOptions:{label:"First Name",required:!0}},{key:"lastName",type:"input",className:"col-xs-4",templateOptions:{label:"Last Name",required:!0}},{key:"phone",type:"input",className:"col-xs-4",templateOptions:{label:"Phone",required:!0}}]},{className:"row",fieldGroup:[{key:"street1",type:"input",className:"col-xs-4",templateOptions:{label:"Street",required:!0}},{key:"street2",type:"input",className:"col-xs-4",templateOptions:{label:"Street 2",required:!1},expressionProperties:{"templateOptions.disabled":"!model.street1"}}]},{className:"row",fieldGroup:[{key:"city",type:"input",className:"col-xs-4",templateOptions:{label:"City",required:!0}},{key:"state",type:"input",className:"col-xs-4",templateOptions:{label:"State",required:!1}},{key:"zip",type:"input",className:"col-xs-4",templateOptions:{label:"ZIP",required:!1}}]},{key:"country",type:"input",className:"col-xs-12",templateOptions:{label:"Country",required:!0}},{className:"row",fieldGroup:[{key:"isDefault",type:"checkbox",className:"col-xs-12",templateOptions:{label:"Set as Default",required:!1}}]}]}t.$inject=["$timeout","$http","Routing","ModalFormFactory"],e.module("app").controller("AddressBookCtrl",t)}(angular),function(e){"use strict";function t(e){function t(){var t=e.loadingIndicator;t.response&&200!=t.response.status&&!t.response.isHandled&&alert("Unexpected error: HTTP "+t.response.status+" "+t.response.statusText)}e.$watch("loadingIndicator.isLoading",t)}t.$inject=["$rootScope"],e.module("app").run(t)}(angular),function(e){"use strict";function t(e){e.interceptors.push(r)}function r(e,t){e.loadingIndicator={isLoading:!1,response:null};var r=e.loadingIndicator;return{request:function(e){return r.isLoading=!0,r.response=null,e},requestError:function(e){return r.isLoading=!1,r.response=e,t.reject(e)},response:function(e){return r.isLoading=!1,r.response=e,e},responseError:function(e){return r.isLoading=!1,r.response=e,t.reject(e)}}}t.$inject=["$httpProvider"],r.$inject=["$rootScope","$q"],e.module("app").config(t)}(angular),function(e){"use strict";e.module("app").value("Routing",Routing)}(angular),function(e){"use strict";function t(e,t){function r(r,n){var a=t.defer();return e.open({templateUrl:"template/modal-form.html",size:"lg",controller:"ModalFormCtrl",controllerAs:"mfCtrl",animation:!1,resolve:{formDefinition:function(){return r},modalOptions:function(){return n},deferred:function(){return a}}}),a.promise}this.create=r}t.$inject=["$uibModal","$q"],e.module("app").service("ModalFormFactory",t)}(angular),function(e){"use strict";function t(t,r,n,a,o,s){function l(){if(p.form.$valid){var n;n=e.copy(p.formData),r({method:"POST",url:p.url,data:n}).then(i,d).then(t.close)}else e.forEach(p.formFields,function(e){e.formControl&&e.formControl.$setTouched()}),p.errorMessage="Invalid input. Please check and try again."}function i(e){return s.resolve(e),s.promise}function u(){r({url:o["delete"].url,method:"POST",data:o["delete"].data||""}).then(i,d).then(t.close)}function d(e){return e.isHandled=!0,400==e.status&&e.data&&e.data.message?p.errorMessage=e.data.message:p.errorMessage="HTTP "+e.status+" "+e.statusText,n.reject(e)}function c(){p.errorMessage=null}var p=this;p.formData=a.data,p.formFields=a.fields,p.url=a.url,p.title=o.title,p.errorMessage=null,o["delete"]&&(p["delete"]=u),p.submit=l,p.dismissError=c}t.$inject=["$uibModalInstance","$http","$q","formDefinition","modalOptions","deferred"],e.module("app").controller("ModalFormCtrl",t)}(angular),angular.module("app").run(["$templateCache",function(e){e.put("template/modal-form.html",'<div class="modal-header">\n    <h4 class="modal-title" ng-bind="mfCtrl.title"></h4>\n</div>\n<form ng-submit="mfCtrl.submit()" name="mfCtrl.form" class="form-condensed">\n    <div class="modal-body">\n        <div class="alert alert-danger" role="alert" ng-show="mfCtrl.errorMessage">\n            <button type="button" class="pull-right btn btn-xs btn-danger glyphicon glyphicon-remove" ng-click="mfCtrl.dismissError()"></button>\n            <div ng-bind="mfCtrl.errorMessage"></div>\n        </div>\n\n        <formly-form model="mfCtrl.formData" fields="mfCtrl.formFields"></formly-form>\n    </div>\n    <div class="modal-footer">\n        <button ng-show="mfCtrl.delete" class="btn btn-danger pull-left" type="button" ng-click="mfCtrl.delete()">Delete</button>\n        <button class="btn btn-default" type="button" ng-click="$dismiss()">Cancel</button>\n        <input class="btn btn-primary" type="submit" value="Submit">\n    </div>\n</form>\n')}]);